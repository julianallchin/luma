/* app.css — Tailwind v4 + daisyUI as the single source of truth */
@import "tailwindcss";
@import "tw-animate-css";

/* Enable daisyUI themes (pick what you want to ship) */
@plugin "daisyui" {
  themes: all;
}

/* Optional: keep using `dark:` variant in utilities if you like */
@custom-variant dark (&:is(.dark *));

/* Global base styles (no hard-coded colors here; colors come from daisy vars) */
:root {
  font-family: Inter, Avenir, Helvetica, Arial, sans-serif;
  font-size: 16px;
  line-height: 24px;
  font-weight: 400;

  color: #0f0f0f;
  background-color: #f6f6f6;

  font-synthesis: none;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  -webkit-text-size-adjust: 100%;

  /* your sizing tokens */
  --radius: 0.625rem;
  
  /* Titlebar height token; macOS ~28px, Win ~32px. Override per-OS if you like. */
  --titlebar-height: 28px;
}

/* ---- Tailwind v4 tokens wired to daisyUI variables ----
   When `data-theme` changes (or prefers-color-scheme flips),
   daisy updates these, and shadcn/Tailwind utilities follow.
*/
@theme inline {
  /* Radii */
  --radius-sm: calc(var(--radius) - 4px);
  --radius-md: calc(var(--radius) - 2px);
  --radius-lg: var(--radius);
  --radius-xl: calc(var(--radius) + 4px);

  /* shadcn-style semantic tokens ← daisyUI */
  --color-background:             var(--color-base-100);
  --color-foreground:             var(--color-base-content);

  --color-card:                   var(--color-base-100);
  --color-card-foreground:        var(--color-base-content);

  --color-popover:                var(--color-base-200);
  --color-popover-foreground:     var(--color-base-content);

  --color-primary:                var(--color-primary);
  --color-primary-foreground:     var(--color-primary-content);

  --color-secondary:              var(--color-secondary);
  --color-secondary-foreground:   var(--color-secondary-content);

  --color-accent:                 var(--color-accent);
  --color-accent-foreground:      var(--color-accent-content);

  --color-destructive:            var(--color-error);
  --color-destructive-foreground: var(--color-error-content);

  --color-warning:                var(--color-warning);
  --color-warning-foreground:     var(--color-warning-content);

  --color-success:                var(--color-success);
  --color-success-foreground:     var(--color-success-content);

  --color-info:                   var(--color-info);
  --color-info-foreground:        var(--color-info-content);

  /* Chrome */
  --color-muted:                  var(--color-base-200);
  --color-muted-foreground:       color-mix(in oklch, var(--color-base-content) 60%, var(--color-base-100));

  --color-border:                 var(--color-base-300);
  --color-input:                  var(--color-base-300);
  --color-ring:                   var(--color-primary);

  /* Sidebar (map to base + primary) */
  --color-sidebar:                var(--color-base-100);
  --color-sidebar-foreground:     var(--color-base-content);
  --color-sidebar-primary:        var(--color-primary);
  --color-sidebar-primary-foreground: var(--color-primary-content);
  --color-sidebar-accent:         var(--color-base-200);
  --color-sidebar-accent-foreground:  var(--color-base-content);
  --color-sidebar-border:         var(--color-base-300);
  --color-sidebar-ring:           var(--color-primary);

  /* Charts (derived from daisy’s palette so they theme-switch) */
  --color-chart-1:                var(--color-primary);
  --color-chart-2:                var(--color-secondary);
  --color-chart-3:                var(--color-accent);
  --color-chart-4:                var(--color-success);
  --color-chart-5:                var(--color-warning);

  /* Tailwind gray-* utilities, derived from daisy base/content
     (so your existing `text-gray-*` / `bg-gray-*` adapt to themes) */
  --color-gray-50:  color-mix(in oklch, var(--color-base-100) 96%, var(--color-base-content));
  --color-gray-100: color-mix(in oklch, var(--color-base-100) 92%, var(--color-base-content));
  --color-gray-200: color-mix(in oklch, var(--color-base-100) 84%, var(--color-base-content));
  --color-gray-300: var(--color-base-300);
  --color-gray-400: color-mix(in oklch, var(--color-base-100) 60%, var(--color-base-content));
  --color-gray-500: color-mix(in oklch, var(--color-base-100) 45%, var(--color-base-content));
  --color-gray-600: color-mix(in oklch, var(--color-base-100) 32%, var(--color-base-content));
  --color-gray-700: color-mix(in oklch, var(--color-base-100) 22%, var(--color-base-content));
  --color-gray-800: color-mix(in oklch, var(--color-base-100) 12%, var(--color-base-content));
  --color-gray-900: color-mix(in oklch, var(--color-base-100) 6%,  var(--color-base-content));
  --color-gray-950: color-mix(in oklch, var(--color-base-100) 3%,  var(--color-base-content));
}

/* Draggable overlay bar */
.titlebar {
  position: fixed;
  inset: 0 0 auto 0;
  height: calc(env(safe-area-inset-top) + var(--titlebar-height));
  padding-top: env(safe-area-inset-top);
  -webkit-app-region: drag;
  background: color-mix(in oklch, var(--color-base-100) 70%, transparent);
  backdrop-filter: blur(10px);
  color: var(--color-base-content);
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding-inline: 0.75rem;
  z-index: 50;
}

/* Buttons/inputs inside must be non-draggable */
.titlebar .no-drag {
  -webkit-app-region: no-drag;
}

/* Push content below the overlay region */
.pt-titlebar {
  padding-top: calc(env(safe-area-inset-top) + var(--titlebar-height));
}

/* Base layer hooking Tailwind utilities to our tokens */
@layer base {
  * {
    @apply border-border outline-ring/50;
  }
  body {
    @apply bg-background text-foreground;
  }
}